<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¢Ù„â€ŒÚ©Ø§Ù¾ÙˆÙ† Û² - Ù†Ø³Ø®Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>
    <style>
        :root {
            --gold: #d4af37;
            --dark-gold: #b8860b;
            --bg-color: #0a0a0a;
            --panel-bg: rgba(20, 20, 20, 0.95);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Tahoma', sans-serif;
            background-color: var(--bg-color);
            color: white; overflow: hidden;
        }

        .hidden { display: none !important; }

        /* --- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ --- */
        #auth-screen {
            height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: radial-gradient(circle, #222 0%, #000 100%);
        }

        .auth-card {
            background: var(--panel-bg);
            padding: 30px; border-radius: 20px; border: 1px solid var(--gold);
            text-align: center; width: 80%; max-width: 350px;
        }

        input {
            width: 100%; padding: 12px; margin: 10px 0;
            border-radius: 10px; border: 1px solid #444; background: #111; color: white;
            box-sizing: border-box; text-align: center;
        }

        .btn-gold {
            width: 100%; padding: 12px; background: linear-gradient(to bottom, var(--gold), var(--dark-gold));
            border: none; border-radius: 10px; color: black; font-weight: bold; cursor: pointer;
        }

        /* --- Ù„Ø§Ø¨ÛŒ Ø§ØµÙ„ÛŒ (Ù…Ø´Ø§Ø¨Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª) --- */
        #lobby-screen {
            width: 100%; height: 100%;
            background: url('https://w0.peakpx.com/wallpaper/137/914/HD-wallpaper-godfather-mafia.jpg') no-repeat center center;
            background-size: cover;
            position: relative;
            display: flex; flex-direction: column; justify-content: space-between;
        }

        /* Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ */
        .top-bar {
            height: 60px; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
        }

        .profile-tag {
            background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 15px;
            border: 1px solid var(--gold); font-size: 14px;
        }

        .stats { display: flex; gap: 10px; }
        .stat-box {
            background: rgba(0,0,0,0.6); padding: 3px 10px; border-radius: 10px;
            border: 0.5px solid #555; font-size: 13px; display: flex; align-items: center; gap: 5px;
        }

        /* Ù…Ù†ÙˆÛŒ Ú©Ù†Ø§Ø±ÛŒ */
        .side-menu {
            position: absolute; right: 15px; top: 80px; display: flex; flex-direction: column; gap: 15px;
        }

        .menu-item {
            width: 65px; height: 65px; background: var(--panel-bg);
            border: 1px solid var(--gold); border-radius: 12px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-size: 10px; cursor: pointer;
        }

        /* Ø¨Ø®Ø´ Ù¾Ø§ÛŒÛŒÙ† */
        .bottom-area {
            padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            text-align: center;
        }

        .trophy-row { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; }

        .game-actions { display: flex; gap: 10px; width: 100%; }
        .btn-play {
            flex: 1; padding: 18px; border-radius: 15px; border: 2px solid #5e4a28;
            font-weight: bold; font-size: 18px; cursor: pointer;
        }
        .ranked { background: linear-gradient(to bottom, var(--gold), var(--dark-gold)); color: #222; }
        .friendly { background: #333; color: white; border-color: #555; }

        /* Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† (Modal) */
        #admin-modal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 90%; max-width: 400px; background: #1a1a1a; border: 2px solid red;
            border-radius: 20px; padding: 20px; z-index: 1000;
        }
    </style>
</head>
<body>

<!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
<div id="auth-screen">
    <div class="auth-card">
        <h2 style="color:var(--gold)">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¢Ù„â€ŒÚ©Ø§Ù¾ÙˆÙ† Û²</h2>
        <input type="text" id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
        <input type="password" id="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
        <input type="text" id="bday" placeholder="Ø³Ø§Ù„ ØªÙˆÙ„Ø¯">
        <button class="btn-gold" onclick="handleAuth()">ØªØ§ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯</button>
    </div>
</div>

<!-- Ù„Ø§Ø¨ÛŒ Ø§ØµÙ„ÛŒ -->
<div id="lobby-screen" class="hidden">
    <div class="top-bar">
        <div class="profile-tag">âœï¸ <span id="user-name-label">Ú©Ø§Ø±Ø¨Ø±</span></div>
        <div class="stats">
            <div class="stat-box"><span style="color:magenta">ğŸ’</span> <span id="gems-val">1</span></div>
            <div class="stat-box"><span style="color:gold">ğŸª™</span> <span id="coins-val">218</span></div>
        </div>
    </div>

    <div class="side-menu">
        <div class="menu-item">ğŸ’°<br>ÙØ±ÙˆØ´Ú¯Ø§Ù‡</div>
        <div class="menu-item">ğŸ§<br>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</div>
        <div id="admin-btn" class="menu-item hidden" style="border-color: red; color: red;" onclick="toggleAdmin(true)">âš™ï¸<br>Ù…Ø¯ÛŒØ±ÛŒØª</div>
    </div>

    <div class="bottom-area">
        <div class="trophy-row">
            <span style="font-size: 30px;">ğŸ¥‰</span>
            <span style="font-size: 50px; margin-top:-10px">ğŸ¥‡</span>
            <span style="font-size: 30px;">ğŸ¥ˆ</span>
        </div>
        <div class="game-actions">
            <button class="btn-play ranked" onclick="alert('Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ø§Ø²ÛŒ Ø§Ù…ØªÛŒØ§Ø²ÛŒ...')">Ø¨Ø§Ø²ÛŒ Ø§Ù…ØªÛŒØ§Ø²ÛŒ</button>
            <button class="btn-play friendly" onclick="alert('Ø³Ø§Ø®Øª Ø§ØªØ§Ù‚ Ø¯ÙˆØ³ØªØ§Ù†Ù‡...')">Ø¨Ø§Ø²ÛŒ Ø¯ÙˆØ³ØªØ§Ù†Ù‡</button>
        </div>
        <p style="font-size: 12px; color: #777; margin-top: 10px;" onclick="location.reload()">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
    </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø¯ÛŒØ±ÛŒØª -->
<div id="admin-modal" class="hidden">
    <h3 style="color:red; text-align:center;">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¯Ù…ÛŒÙ†</h3>
    <input type="text" id="target-user" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ù‡Ø¯Ù">
    <input type="number" id="new-coins" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡ Ø¬Ø¯ÛŒØ¯">
    <button class="btn-gold" onclick="updateUser()">Ø§Ø¹Ù…Ø§Ù„ ØªØºÛŒÛŒØ±Ø§Øª</button>
    <button class="btn-gold" style="background:gray; margin-top:10px" onclick="toggleAdmin(false)">Ø¨Ø³ØªÙ†</button>
</div>

<script>
    let currentUser = null;

    function handleAuth() {
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;
        if(!u || !p) return alert("Ù„Ø·ÙØ§ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");

        let users = JSON.parse(localStorage.getItem('game_users') || '{}');

        if(!users[u]) {
            users[u] = { pass: p, coins: 218, gems: 1, isAdmin: (p === 'tp_mfia') };
            localStorage.setItem('game_users', JSON.stringify(users));
        }

        if(users[u].pass === p) {
            currentUser = u;
            loadLobby(users[u]);
        } else {
            alert("Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
        }
    }

    function loadLobby(data) {
        document.getElementById('auth-screen').classList.add('hidden');
        document.getElementById('lobby-screen').classList.remove('hidden');
        document.getElementById('user-name-label').innerText = currentUser;
        document.getElementById('coins-val').innerText = data.coins;
        document.getElementById('gems-val').innerText = data.gems;

        if(data.isAdmin) {
            document.getElementById('admin-btn').classList.remove('hidden');
        }
    }

    function toggleAdmin(show) {
        document.getElementById('admin-modal').classList.toggle('hidden', !show);
    }

    function updateUser() {
        const target = document.getElementById('target-user').value;
        const newCoins = document.getElementById('new-coins').value;
        let users = JSON.parse(localStorage.getItem('game_users'));

        if(users[target]) {
            users[target].coins = newCoins;
            localStorage.setItem('game_users', JSON.stringify(users));
            alert("Ø³Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± " + target + " ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.");
            if(target === currentUser) location.reload();
        } else {
            alert("Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.");
        }
    }
</script>

</body>
</html>
