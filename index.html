<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>AL CAPONE â€“ Zodiac Mafia</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<style>
body{
  margin:0;
  font-family:tahoma;
  background:url('ALCAPONE_BG.jpg') center/cover fixed;
  color:#f5d37a;
}
.overlay{
  background:rgba(0,0,0,.75);
  min-height:100vh;
}
.glass{
  backdrop-filter:blur(10px);
  background:rgba(0,0,0,.6);
  border:1px solid #d4af37;
  border-radius:15px;
  padding:20px;
  max-width:400px;
  margin:40px auto;
}
input,button{
  width:100%;
  margin:8px 0;
  padding:10px;
  border-radius:8px;
  border:none;
}
button{
  background:#d4af37;
  color:black;
  font-weight:bold;
}
.gold{color:#d4af37}
.big-logo{
  position:fixed;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:48px;
  letter-spacing:10px;
  opacity:.2;
}
.hidden{display:none}
</style>
</head>

<body>
<div class="overlay">

<!-- AUTH -->
<div id="auth" class="glass">
<h2 id="authTitle">ÙˆØ±ÙˆØ¯</h2>

<div id="login">
<input id="lUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
<input id="lPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
<button onclick="login()">ÙˆØ±ÙˆØ¯</button>
<p onclick="switchAuth()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</p>
</div>

<div id="register" class="hidden">
<input id="rUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
<input id="rPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
<input id="rBirth" type="date">
<button onclick="register()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
<p onclick="switchAuth()">ÙˆØ±ÙˆØ¯</p>
</div>
</div>

<!-- LOBBY -->
<div id="lobby" class="glass hidden">
<h2>ğŸ© Ù„Ø§Ø¨ÛŒ AL CAPONE</h2>
<p>âŒ ÙØ­Ø§Ø´ÛŒ = Ø¨Ù† | âŒ Ù‚Ø³Ù… Ù…Ù…Ù†ÙˆØ¹</p>
<p id="userInfo"></p>
<button onclick="openReports()">ğŸ“¬ Ú¯Ø²Ø§Ø±Ø´</button>
<button onclick="openAdmin()">ğŸ› ï¸ Ø§Ø¯Ù…ÛŒÙ†</button>
</div>

<!-- ADMIN -->
<div id="admin" class="glass hidden">
<h3>Admin Panel</h3>
<input id="adminPass" placeholder="Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†">
<button onclick="adminLogin()">ÙˆØ±ÙˆØ¯</button>
<div id="adminPanel" class="hidden"></div>
</div>

<div class="big-logo">ALCAPONE</div>
</div>

<script>
let users=JSON.parse(localStorage.getItem("users")||"[]");
let reports=JSON.parse(localStorage.getItem("reports")||"[]");
let current=null;

function switchAuth(){
login.classList.toggle("hidden");
register.classList.toggle("hidden");
authTitle.innerText=login.classList.contains("hidden")?"Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…":"ÙˆØ±ÙˆØ¯";
}

function register(){
if(!rUser.value||!rPass.value||!rBirth.value)return alert("Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ù„Ø§Ø²Ù… Ø§Ø³Øª");
if(users.find(u=>u.u==rUser.value))return alert("ØªÚ©Ø±Ø§Ø±ÛŒ");
users.push({u:rUser.value,p:rPass.value,b:rBirth.value,coins:100,rank:"Ø¨Ø±Ù†Ø²",ban:false});
save();
alert("Ø«Ø¨Øª Ø´Ø¯");
switchAuth();
}

function login(){
let u=users.find(x=>x.u==lUser.value&&x.p==lPass.value);
if(!u)return alert("ØºÙ„Ø·");
if(u.ban)return alert("Ø¨Ù† Ø´Ø¯ÛŒ");
current=u;
auth.classList.add("hidden");
lobby.classList.remove("hidden");
userInfo.innerText=`ğŸ‘¤ ${u.u} | ğŸ’° ${u.coins} | ğŸ† ${u.rank}`;
}

function save(){
localStorage.setItem("users",JSON.stringify(users));
localStorage.setItem("reports",JSON.stringify(reports));
}

function openReports(){
let t=prompt("Ú¯Ø²Ø§Ø±Ø´:");
if(t){reports.push({from:current.u,text:t});save();alert("Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯");}
}

function openAdmin(){
admin.classList.remove("hidden");
}

function adminLogin(){
if(adminPass.value!=="tp_mfia")return alert("ØºÙ„Ø·");
let html="<h4>Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h4>";
users.forEach((u,i)=>{
html+=`${u.u} | ${u.rank} | ${u.coins}
<button onclick="ban(${i})">Ban</button>
<button onclick="kick()">Kick</button><br>`;
});
html+="<h4>Ú¯Ø²Ø§Ø±Ø´Ø§Øª</h4>";
reports.forEach((r,i)=>html+=`${r.from}: ${r.text}<button onclick="delRep(${i})">X</button><br>`);
adminPanel.innerHTML=html;
adminPanel.classList.remove("hidden");
}

function ban(i){users[i].ban=true;save();adminLogin();}
function delRep(i){reports.splice(i,1);save();adminLogin();}
function kick(){alert("Kick (online logic later)");}
</script>
</body>
</html>
