<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ALCAPONE 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:tahoma;
  background:#000 url('ALCAPONE_BG.jpg') center/cover fixed;
  color:#f5d37a;
}
.overlay{
  background:rgba(0,0,0,.75);
  min-height:100vh;
}
.glass{
  backdrop-filter:blur(10px);
  background:rgba(0,0,0,.6);
  border:1px solid #d4af37;
  border-radius:15px;
  padding:20px;
  max-width:400px;
  margin:40px auto;
}
input,button{
  width:100%;
  margin:8px 0;
  padding:10px;
  border-radius:8px;
  border:none;
}
button{
  background:#d4af37;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
.hidden{display:none}

/* âœ… ALCAPONE LOGO (REGISTER) */
.alcapone-logo{
  text-align:center;
  font-size:42px;
  font-weight:700;
  letter-spacing:6px;
  color:#d4af37;
  margin-bottom:15px;
  font-family:"Segoe UI","Trebuchet MS",Arial,sans-serif;
}

/* âœ… LOBBY BAR */
.lobby-bar{
  display:flex;
  justify-content:space-between;
  background:rgba(0,0,0,.7);
  padding:10px;
  border-radius:10px;
  margin-bottom:15px;
}

.big-logo{
  position:fixed;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:48px;
  letter-spacing:10px;
  opacity:.15;
}
</style>
</head>

<body>
<div class="overlay">

<!-- AUTH -->
<div id="auth" class="glass">
  <h2 id="authTitle">ÙˆØ±ÙˆØ¯</h2>

  <!-- LOGIN -->
  <div id="login">
    <input id="lUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
    <input id="lPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
    <button type="button" onclick="login()">ÙˆØ±ÙˆØ¯</button>
    <p onclick="switchAuth()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</p>
  </div>

  <!-- REGISTER -->
  <div id="register" class="hidden">
    <div class="alcapone-logo">ALCAPONE</div>

    <input id="rUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
    <input id="rPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
    <input id="rBirth" type="date">

    <button type="button" onclick="register()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
    <p onclick="switchAuth()">ÙˆØ±ÙˆØ¯</p>
  </div>
</div>

<!-- âœ… LOBBY -->
<div id="lobby" class="glass hidden">
  <div class="lobby-bar">
    <span id="playerName">ğŸ‘¤</span>
    <span id="playerMoney">ğŸ’° 0 | ğŸ’ 0</span>
  </div>

  <h2>ğŸ© Ù„Ø§Ø¨ÛŒ Alcapone 2</h2>
  <p>âŒ ÙØ­Ø§Ø´ÛŒ = Ø¨Ù† | âŒ Ù‚Ø³Ù… Ù…Ù…Ù†ÙˆØ¹</p>

  <button onclick="openReports()">ğŸ“¬ Ú¯Ø²Ø§Ø±Ø´</button>
  <button onclick="openAdmin()">ğŸ› ï¸ Ø§Ø¯Ù…ÛŒÙ†</button>
</div>

<!-- ADMIN -->
<div id="admin" class="glass hidden">
  <h3>Admin Panel</h3>
  <input id="adminPass" placeholder="Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†">
  <button onclick="adminLogin()">ÙˆØ±ÙˆØ¯</button>
  <div id="adminPanel" class="hidden"></div>
</div>

<div class="big-logo">ALCAPONE</div>
</div>

<script>
/* DATA */
let users = JSON.parse(localStorage.getItem("users") || "[]");
let reports = JSON.parse(localStorage.getItem("reports") || "[]");
let current = null;

/* AUTH SWITCH */
function switchAuth(){
  login.classList.toggle("hidden");
  register.classList.toggle("hidden");
  authTitle.innerText =
    login.classList.contains("hidden") ? "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…" : "ÙˆØ±ÙˆØ¯";
}

/* REGISTER */
function register(){
  const u = rUser.value.trim();
  const p = rPass.value.trim();
  const b = rBirth.value;

  if(!u || !p || !b) return alert("Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª");
  if(users.find(x=>x.u===u)) return alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø§Ø³Øª");

  users.push({
    u,p,b,
    coins:100,
    diamonds:5,
    rank:"Ø¨Ø±Ù†Ø²",
    ban:false
  });

  save();
  alert("Ø§Ú©Ø§Ù†Øª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯");
  switchAuth();
}

/* âœ… LOGIN â†’ LOBBY */
function login(){
  const u = lUser.value.trim();
  const p = lPass.value.trim();

  let user = users.find(x=>x.u===u && x.p===p);
  if(!user) return alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª");
  if(user.ban) return alert("Ø§Ú©Ø§Ù†Øª Ø´Ù…Ø§ Ø¨Ù† Ø´Ø¯Ù‡");

  current = user;

  document.getElementById("auth").classList.add("hidden");
  document.getElementById("lobby").classList.remove("hidden");

  playerName.innerText = `ğŸ‘¤ ${user.u}`;
  playerMoney.innerText = `ğŸ’° ${user.coins} | ğŸ’ ${user.diamonds}`;
}

/* SAVE */
function save(){
  localStorage.setItem("users", JSON.stringify(users));
  localStorage.setItem("reports", JSON.stringify(reports));
}

/* REPORT */
function openReports(){
  let t = prompt("Ú¯Ø²Ø§Ø±Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³:");
  if(t){
    reports.push({from:current.u,text:t});
    save();
    alert("Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯");
  }
}

/* ADMIN */
function openAdmin(){
  admin.classList.remove("hidden");
}

function adminLogin(){
  if(adminPass.value!=="tp_mfia") return alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡");

  let html="<h4>Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h4>";
  users.forEach((u,i)=>{
    html+=`${u.u} | ğŸ’° ${u.coins}
    <button onclick="ban(${i})">Ban</button><br>`;
  });

  html+="<h4>Ú¯Ø²Ø§Ø±Ø´Ø§Øª</h4>";
  reports.forEach((r,i)=>{
    html+=`${r.from}: ${r.text}
    <button onclick="delRep(${i})">X</button><br>`;
  });

  adminPanel.innerHTML=html;
  adminPanel.classList.remove("hidden");
}

function ban(i){
  users[i].ban=true;
  save();
  adminLogin();
}

function delRep(i){
  reports.splice(i,1);
  save();
  adminLogin();
}
</script>

</body>
</html>
